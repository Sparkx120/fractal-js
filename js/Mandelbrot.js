/*
 MIT
 MIT
*/
var Canvas2D=function(){this.container=document.createElement("div");this.canvas=document.createElement("canvas");this.canvas.style.width="100vw";this.canvas.style.height="100vh";this.canvas.style.position="absolute";this.container.style.margin="0%";this.container.style.width="100vw";this.container.style.height="100vh";this.container.style.position="relative";this.context=this.canvas.getContext("2d");this.container.appendChild(this.canvas);document.body.appendChild(this.container);this.rect=this.canvas.getBoundingClientRect();
$(window).on("resize",function(a){this.rect=this.canvas.getBoundingClientRect();this.canvas.width=this.rect.width;this.canvas.height=this.rect.height;this.width=this.rect.width;this.height=this.rect.height;this.buffer=this.context.createImageData(this.width,this.height)}.bind(this));this.canvas.width=this.rect.width;this.canvas.height=this.rect.height;this.width=this.rect.width;this.height=this.rect.height;this.pixelImageData=this.context.createImageData(1,1);this.buffer=this.context.createImageData(this.width,
this.height)};Canvas2D.prototype.drawPixel=function(a){this.pixelImageData.data[0]=a.r;this.pixelImageData.data[1]=a.g;this.pixelImageData.data[2]=a.b;this.pixelImageData.data[3]=a.a;this.context.putImageData(this.pixelImageData,a.x,a.y)};Canvas2D.prototype.drawPixelToBuffer=function(a){var b=4*(a.x+a.y*this.width)-4;this.buffer.data[b]=a.r;this.buffer.data[b+1]=a.g;this.buffer.data[b+2]=a.b;this.buffer.data[b+3]=a.a};
Canvas2D.prototype.flushBuffer=function(){this.context.putImageData(this.buffer,0,0)};Canvas2D.prototype.clearBuffer=function(){this.buffer=this.context.createImageData(this.width,this.height)};Canvas2D.prototype.drawLine=function(a){this.context.beginPath();this.context.moveTo(a.x1,a.y1);this.context.lineTo(a.x2,a.y2);this.context.stroke()};var Mandelbrot=function(a){this.canvas2d=a;this.iterations=255;this.scale=1;this.yDelta=this.xDelta=0};
Mandelbrot.prototype.render=function(){this.canvas2d.clearBuffer();var a=this.width=this.canvas2d.width,b=this.height=this.canvas2d.height,m=this.xDelta,n=this.yDelta,k,l;k=3.5/this.scale;l=2/this.scale;for(var e=0;e<a;e++)for(var f=0;f<b;f++){for(var g=k/a*(e+m)-k/1.4,p=l/b*(f+n)-l/2,c=0,d=0,h=0;4>c*c+d*d&&h<this.iterations;){var q=c*c-d*d+g,d=2*c*d+p,c=q;h++}g=255==h?0:h;this.canvas2d.drawPixel({x:e,y:f,r:0,g:.3*g,b:g,a:255})}};
(()=>{window.canvas2D=new Canvas2D;$(window).on("load",()=>{mandelbrot=new Mandelbrot(window.canvas2D);setTimeout(()=>{console.log("Wahoo");mandelbrot.render()},10);$(window).on("resize",()=>{mandelbrot.render()})})})();
